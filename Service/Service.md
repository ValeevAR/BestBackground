# Реализация сервиса с моделью

В этой секции приведены:
1. Код сервиса
2. Файл с инструкцией по запуску и эксплуатации
3. Dockerfile для запуска сервера-сервиса

 # Код

 Основная работа кода выполняется в service.py, где описаны все методы для преобразования изображений, инициализация моделей, и логика обработки различных типовы входных данных.

 Блок app.py описывает бэкенд-составляющую сервиса: логику обработки запросов и вывод.

 Блок client.py описывает базовый API взаимодействия пользователя с сервисом посредством отправления ссылок или локальных файлов на обработку.

 # Как пользоваться

 Для запуска сервиса необходимо склонировать себе этот репозиторий или содержимое папки Service и перейти в директорию с Dockerfile.

 Далее запустить команду создания Docker-образа:

```bash
docker build -t app:0.0.1 .
```

После завершения установки можно запустить сервис для работы командой

```bash
docker run -p 8080:8080 app:0.0.1
```

Если установка произошла успешно, то у пользователя появится доступ к серверу в локальной сети. Проверить его работу можно в Jupyter-notebook test.ipynb в директории Service.
 
# Нагрузочное тестирование

Помимо прочего, в репозитории хранится скрипт для нагрузочного тестирования сервиса на машине. Для его использования необходимо установить locust.

```bash
pip install locust
```

Для запуска сервера нагрузочного тестирования нужно из директории Service вызвать locust:

```bash
locust
```

В этом случае автоматически запустится локальный сервер на порте 8089, использующий в качестве имитации пользователя класс из locustfile.py

Для использования сервиса нужно в браузере перейти по адресу

```
http://localhost:8089 или http://127.0.0.1:8089
```

Далее можно в интерфейса задать нагрузку на сервер и следить за его работой в реальном времени.